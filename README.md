# Enum
## enum в Си
###  Что такое enum и зачем он нужен
enum (enumeration, перечисление) — это пользовательский целочисленный тип, значения которого ограничены набором именованных констант (перечислителей). \
Главная цель: сделать код читаемее и безопаснее, заменив “магические числа” на понятные имена. \
Пример идеи: \
Было:  mode = 2; (неясно, что значит 2) \
Стало: mode = MODE_WRITE; (понятно, что именно мы анализируем)

### Синтаксис и присваивание значений
Базовый синтаксис:
```
enum Color {
    COLOR_RED,
    COLOR_GREEN,
    COLOR_BLUE
};
```
Если явные значения не заданы, компилятор присваивает: \
первому — 0, \
далее по возрастанию на 1. \
 \
То есть: COLOR_RED = 0, COLOR_GREEN = 1, COLOR_BLUE = 2. \
Можно задавать значения вручную:
```
enum HttpStatus {
    HTTP_OK = 200,
    HTTP_NOT_FOUND = 404,
    HTTP_SERVER_ERROR = 500
};
```
Можно смешивать:
```
enum Example {
    A = 10,
    B,      // 11
    C = 20,
    D       // 21
};
```
### enum — это целое число

В C перечисление — это интегральный тип. На практике: \
переменная enum хранится как некоторое целое (часто int), \
перечислители участвуют в выражениях как целые числа.
```
enum Color c = COLOR_RED;
int x = c + 10;   // допустимо
```
язык C не запрещает присвоить “неизвестное” значение:
```
enum Color c = (enum Color)123; // формально возможно
```
Поэтому enum улучшает читаемость, но не является строгим “ограничителем домена”, \ 
как в некоторых других языках. 

### typedef и стиль именования

Чтобы не писать каждый раз enum перед типом, можно сделать typedef:
```
typedef enum {
    MODE_READ,
    MODE_WRITE,
    MODE_APPEND
} FileMode;

// И тогда

FileMode mode = MODE_WRITE;
```
В C нет пространств имён, поэтому принято делать префиксы:

- HTTP_OK, HTTP_NOT_FOUND
- COLOR_RED, COLOR_GREEN \
Это защищает от конфликтов имён.

### enum как набор флагов (битовые маски)

Частая и очень полезная практика — использовать enum для флагов, комбинируемых через |:
```

typedef enum {
    PERM_READ  = 1 << 0, // 0001
    PERM_WRITE = 1 << 1, // 0010
    PERM_EXEC  = 1 << 2  // 0100
} Perm;

int p = PERM_READ | PERM_WRITE;
if (p & PERM_WRITE) {
    // есть право записи
}
```
